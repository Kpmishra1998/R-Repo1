<!DOCTYPE html>
<html>
  <head>
    <title>Regression with .mono[R]</title>
    <meta charset="utf-8">
    <meta name="author" content="Edward Rubin" />
    <meta name="date" content="2019-05-03" />
    <link href="04RReg_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="04RReg_files/remark-css-0.0.1/metropolis.css" rel="stylesheet" />
    <link href="04RReg_files/remark-css-0.0.1/metropolis-fonts.css" rel="stylesheet" />
    <script src="04RReg_files/htmlwidgets-1.3/htmlwidgets.js"></script>
    <script src="04RReg_files/jquery-1.12.4/jquery.min.js"></script>
    <link href="04RReg_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="04RReg_files/datatables-binding-0.5/datatables.js"></script>
    <link href="04RReg_files/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="04RReg_files/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="04RReg_files/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
    <link href="04RReg_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
    <script src="04RReg_files/crosstalk-1.0.0/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="my-css.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Regression with .mono[R]
## EC 425/525, Lab 4
### Edward Rubin
### 03 May 2019

---

class: inverse, middle



# Prologue

---
name: schedule

# Schedule

## Last time

1. .mono[RStudio] basics
2. Getting data in and out of .mono[R].

## Today

Regression!
---
name: review

# Review

## Data i/o

`readr` and `haven` have you covered for most of your i/o needs.

--

## Best practices

1. Write code in .mono[R] scripts. Troubleshoot in .mono[RStudio]. Then run the scripts.
1. Comment your code. (`# This is a comment`)
1. Name objects and variables with intelligible, standardized names.
  - .hi-purple[BAD] `ALLCARS`, `Vl123a8`, `a.fun`, `cens.12931`, `cens.12933`
  - .hi-pink[GOOD] `unique_cars`, `health_df`, `sim_fun`, `is_female`, `age`
1. Set seeds when generating randomness, _e.g._, `set.seed(123)`.
1. Parallelize when possible. (Packages: `parallel`, `purrr`, `foreach`, *etc.*)
1. Use projects in .mono[RStudio] (next). And organize your projects.
---
name: reg
class: inverse, middle
# Regression in .mono[R]
---
name: comics
class: clear, middle, center

&lt;img src="coffee_economics.jpeg" width="85%" style="display: block; margin: auto;" /&gt;
---
class: clear, middle, center

&lt;img src="coffee_original.jpeg" width="85%" style="display: block; margin: auto;" /&gt;
---
class: clear, middle

.b[Original credit]  Tommy Siegel [@TommySiegel](https://twitter.com/TommySiegel)

.b[Econ update] David Clingingsmith [@dclingi](https://twitter.com/dclingi)


---
layout: true
# Regression in .mono[R]

---
name: lm
## The default option: `lm()`

.mono[R]'s `base`.super[.pink[†]] option for estimating .hi[l]inear regression .hi[m]odels is `lm()`.

.footnote[.pink[†] `base` is .mono[R]'s basic (default) package—loaded on opening. &lt;br&gt;.pink[††] You can remove the intercept by adding `-1` into the formula, _e.g._, `lm(y ~ -1 + x)`.]

--

You use a formula to specify your linear regression model in `lm()`, _e.g._,

`lm(y ~ x)`
- Estimates `\(y_i = \beta_0 + \beta_1 x_i + u_i\)` (.mono[R] automatically includes an intercept).super[.pink[††]]
- using the data stored in the objects `y` and `x`.

--

`lm(y ~ x, data = amazing_df)`
- Estimates `\(y_i = \beta_0 + \beta_1 x_i + u_i\)`
- using the variables (columns) `y` and `x` from the object `amazing_df`.
---
## More `lm()`

Need include more variables? Easy.

`lm(y ~ x1 + x2 + x3, data = some_df)`
- Estimates `\(y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \beta_3 x_{3i} + u_i\)`
- referencing the object `some_df` for the named variables.

---
## Even more `lm()`

Do you want to transform/interact variables? Also easy: use `I()`.

`lm(y ~ x1 + x2 + I(x1^2) + I(x2^2) + I(x1*x2), data = poly_df)`
- Estimates `\(y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \beta_3 x_{1i}^2 + \beta_4 x_{2i}^2 + \beta_5 x_{1i} x_{2i} + u_i\)`
- using variables named in object `poly_df`
- or created via `I()`

--

.note[Note] The following are equivalent
- `lm(y ~ x1 + x2 + I(x1*x2))`
- `lm(y ~ x1 + x2 + x1:x2)`
- `lm(y ~ x1*x2)`


---
name: transformations
## Transforming variables with `lm()`

Notice that in our call

`lm(y ~ x1 + x2 + I(x1^2) + I(x2^2) + I(x1*x2), data = poly_df)`

we did not need to create `\(x_1^2\)`, `\(x_2^2\)`, and `\(x_1\times x_2\)` in the dataset.

.mono[R] will do the calculation (as long as `x1` and `x2` exist somewhere).

--

This is true for any transformation of variables/objects.

- Math./stat. transformations: `I(x^2)`, `I(x/3)`, `I((x - mean(x))/sd(x))`
- Log/exponential transformations: `log(x)`, `exp(x)`
- Indicators: `I(x &lt; 100)`, `I(x == "Oregon")`
---
name: lalonde
## Need data

Before we can go any further, we need data.

--

Let's use data from .hi[[LaLonde (1986)](http://people.hbs.edu/nashraf/LaLonde_1986.pdf)].

This (famous) paper compared experimental and non-experimental estimates of the effect of a randomized jobs program called the National Supported Work Demonstration (NSW).

--

The data are [available online](http://users.nber.org/~rdehejia/data/nswdata3.html) as a `.dta` file.


```r
# Load the 'haven' package
p_load(haven)
# Load treatment data
lalonde_df &lt;- read_dta("http://users.nber.org/~rdehejia/data/nsw.dta")
```
---
layout: false
class: clear, center, middle

<div id="htmlwidget-b6e9af611e0e45a7c157" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b6e9af611e0e45a7c157">{"x":{"filter":"none","fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[37,22,30,27,33,22,23,32,22,33,19,21,18,27,17,19,27,23,40,26,23,41,38,24,33,18,29,25,27,17,24,17,26,48,25,20,25,42,25,23,46,24,21,19,17,18,20,25,17,17,25,23,28,31,18,25,30,17,37,41,42,22,17,29,28,35,27,29,28,27,23,45,29,27,46,18,25,28,31,25,22,28,21,40,22,25,27,23,29,18,38,27,27,38,23,26,42,21,25,31,17,19,29,25,21,44,19,25,18,18,19,18,26,42,25,31,24,26,20,19,25,23,31,18,19,43,27,26,29,17,30,17,20,17,18,21,30,18,20,20,20,25,17,18,19,19,27,18,22,20,20,18,17,26,22,20,18,18,18,19,18,17,19,27,19,19,27,21,29,34,25,31,41,21,20,24,41,21,22,20,17,24,23,23,26,21,18,22,17,20,17,23,32,19,30,25,26,19,19,20,21,23,19,22,23,26,24,18,27,21,25,21,19,18,34,21,25,17,28,18,27,23,19,21,21,23,27,27,23,27,28,25,20,26,23,49,19,21,27,23,22,24,24,18,17,17,28,27,19,18,24,23,21,21,24,20,25,35,17,24,20,21,18,27,22,46,19,19,22,22,26,29,31,29,35,25,22,27,22,19,20,21,27,20,23,27,23,24,20,26,25,26,20,31,24,33,33,23,26,22,34,18,45,18,27,24,34,20,24,28,21,28,20,23,21,36,18,21,30,26,28,31,18,27,19,20,28,34,24,24,22,25,20,21,19,39,19,24,44,23,22,27,27,18,25,31,28,26,30,28,34,21,33,19,20,18,27,26,24,31,22,28,35,20,30,25,25,35,22,21,20,21,25,24,33,21,27,27,20,25,18,26,38,21,34,21,31,34,25,24,19,32,20,23,38,24,19,23,20,25,21,25,22,29,21,21,23,20,21,26,24,43,31,22,29,24,22,19,28,18,18,26,25,26,23,20,24,27,26,37,36,22,22,25,22,27,29,18,24,27,19,22,29,30,22,24,29,29,22,25,30,22,55,35,20,29,20,27,28,20,26,19,34,22,32,19,31,18,28,32,50,20,25,23,21,38,25,25,29,42,39,27,34,25,28,24,32,27,20,29,26,44,24,28,24,25,25,23,20,24,20,25,28,28,21,24,32,21,21,25,22,22,19,31,23,22,33,27,29,38,20,23,29,26,25,24,25,23,25,20,25,29,25,23,44,22,20,36,24,28,39,27,31,26,30,31,26,26,24,25,29,30,25,41,29,25,28,23,54,33,31,34,50,31,36,20,24,23,26,28,45,23,28,26,22,27,27,39,25,31,22,22,28,31,27,28,26,27,27,36,26,23,23,31,36,39,35,21,36,27,26,28,33,28,22,25,25,27,26,28,25,22,23,20,19,17,19,18,17,20,18,20,18,19,17,17,18,18,19,18,19,19,19,18,18,17,18,19,18,18,17,19,19,18,18,18,18,18,18,18,18,19,18,19,18,17,18,17,17,20,18,19,17,18,18,20,19,18,17,17,17,18,19,17,18,18,17,17,17,19,17,19,19,20,19,17,18,20,20,20,19,18,19,17,18,17,17,19,17,20,17,19,17,19,20,18,18,18,18,20,17,19,19,17,20,17,18,20,17,17,19,18],[11,9,12,11,8,9,12,11,16,12,9,13,8,10,7,10,13,10,12,12,11,14,9,11,11,10,11,11,10,10,11,10,11,4,11,12,12,14,5,12,8,10,12,9,8,8,11,11,8,9,5,12,8,11,11,12,11,10,9,4,14,11,8,8,10,10,11,4,9,11,7,5,13,9,13,6,12,15,9,11,12,11,9,11,11,12,9,10,10,12,12,13,8,11,8,11,9,12,8,11,10,8,14,11,12,11,10,12,10,9,9,9,11,12,10,9,10,10,12,10,11,8,12,11,11,9,13,11,10,9,11,10,12,9,12,11,11,11,12,6,10,8,9,10,9,11,10,12,11,9,11,10,10,12,10,12,8,9,10,10,9,10,11,11,10,9,10,11,10,11,10,13,9,11,11,12,9,12,11,9,11,11,12,10,11,13,10,10,10,7,9,11,10,12,10,12,11,10,8,10,11,12,11,11,12,10,12,10,11,11,8,12,11,11,7,11,9,9,8,9,12,9,8,11,11,10,9,11,12,8,11,12,12,12,10,8,11,13,12,11,11,15,12,11,10,9,11,11,11,11,10,12,9,12,9,9,13,8,9,11,12,8,10,12,9,8,10,11,12,12,12,12,9,12,9,12,12,10,10,8,11,12,12,10,12,13,12,12,11,10,14,10,9,4,10,11,12,10,12,9,9,9,11,9,12,8,11,13,4,12,10,12,12,8,11,10,12,14,13,11,9,4,12,7,11,8,8,12,10,9,8,11,11,9,12,9,9,10,9,11,12,8,11,9,8,10,10,10,8,11,10,7,12,9,11,10,12,12,9,12,12,14,10,12,9,11,10,11,8,12,10,8,9,10,11,9,11,10,11,13,11,11,8,11,11,10,13,10,11,9,12,8,9,10,10,11,10,11,7,10,11,10,11,9,11,7,11,12,11,12,12,10,11,11,11,11,9,11,11,10,9,10,10,12,11,8,10,13,5,10,10,11,9,12,10,11,8,9,12,9,9,10,12,11,7,7,14,12,11,11,12,8,3,10,10,9,11,9,10,11,14,8,11,12,12,11,10,9,10,12,10,12,11,10,14,10,7,10,12,10,12,11,13,11,10,7,11,13,12,13,10,11,9,10,11,11,8,11,11,12,11,12,11,12,12,11,10,10,8,10,10,10,9,10,11,11,11,10,11,10,6,10,11,9,9,11,10,11,13,9,11,12,9,11,9,12,11,11,10,8,11,12,10,6,11,8,8,10,12,11,9,14,10,12,11,12,13,11,11,5,12,12,8,11,12,8,12,12,13,11,9,10,11,11,10,13,12,6,11,11,12,10,10,11,10,11,12,12,12,12,8,9,10,12,7,12,11,9,11,12,11,9,9,11,11,11,10,11,8,12,10,10,8,12,11,9,11,11,10,11,8,10,11,10,8,10,10,10,11,11,11,10,9,10,10,11,6,11,8,11,11,10,10,9,10,11,10,9,9,12,9,11,7,11,8,8,10,10,10,10,10,11,10,7,11,9,10,9,10,11,10,9,11,8,10,9,9,8,8,9,9,10,6,11,10,11,9,11,10,9,9,10,11,9,9,11,10,10,10,9,9,11,10,10,9,11,10,9,11,10,10,11,9,10,11,8,8,10,9,9,11,10],[1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,0,1,1,1,1,0,0,1,1,1,0,1,1,0,1,0,1,0,1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,0,1,0,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,0,1,1,0,1,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,1,1,1,0,1,0,1,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>treat<\/th>\n      <th>age<\/th>\n      <th>education<\/th>\n      <th>black<\/th>\n      <th>hispanic<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":7,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[7,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
---
layout: false
class: clear, center, middle

<div id="htmlwidget-8130a0e3386fe6e7e274" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8130a0e3386fe6e7e274">{"x":{"filter":"none","fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722"],[1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,1,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,1,1,0,0,1,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,0,1,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,1,1,1,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,1,1,0,1,1,1,1,0,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1,1,0,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,0,0,1,1,0,0,1,1,1,1,1,1,1,1,0,1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,0,0,1,0,0,0,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,0,1,0,1,0,0,1,1,1,0,0,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,0,0,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,1,1,1,0,1,0,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,0,1,0,1,0,0,1,1,1,0,0,1,1,0,1,0,0,0,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,0,0,0,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7867.916015625,0,0,0,0,0,0,0,2754.64599609375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2836.50610351562,0,0,0,0,0,0,0,0,0,0,0,0,0,1698.60705566406,0,0,1284.07897949219,0,0,0,0,934.445373535156,936.438598632812,4398.9501953125,0,0,0,0,0,0,0,3058.53100585938,0,0,0,0,2657.05688476562,679.673400878906,0,0,0,385.274108886719,0,798.907897949219,0,798.907897949219,3287.375,1392.85302734375,0,0,0,0,0,377.568603515625,5324.10888671875,0,1713.15002441406,2611.21801757812,0,0,0,0,2226.26611328125,8853.673828125,0,0,156.949096679688,8644.15625,375.104705810547,562.656982421875,1395.39001464844,1913.03405761719,5491.53515625,9227.55859375,10802.98046875,11073.08984375,37431.66015625,1618.15002441406,2589.0419921875,6511.1240234375,192.799499511719,421.302398681641,535.553283691406,606.960876464844,660.515930175781,696.219177246094,699.789611816406,856.886413574219,1088.90698242188,1071.10803222656,1160.36596679688,1199.64099121094,1285.32995605469,1371.01696777344,1374.58703613281,1713.77294921875,2202.7958984375,1927.99499511719,2142.21704101562,3213.11303710938,3276.14990234375,3213.32202148438,4167.998046875,4923.26318359375,4641.466796875,4712.8740234375,5498.35009765625,5783.98095703125,6658.56201171875,6426.64599609375,7212.10986328125,7212.1201171875,7390.6337890625,7497.751953125,8015.44189453125,8497.435546875,9180.919921875,15079.9501953125,15709.5595703125,22959.759765625,24806.830078125,1958.09594726562,653.954223632812,1000.54998779297,1569.48999023438,1667.5830078125,1961.86401367188,2321.537109375,2534.07202148438,2615.81689453125,2746.60791015625,4676.45703125,3473.80810546875,3416.90698242188,5100.8388671875,5310.10693359375,7841.97216796875,6409.02685546875,8774.791015625,7782.0419921875,8141.703125,12982.33984375,12625.509765625,14223.5,17983.7109375,23096.650390625,807.951110839844,532.253601074219,851.606079101562,857.519470214844,946.227905273438,1536.50305175781,1341.65100097656,1182.78601074219,1182.78601074219,4310.455078125,1774.18005371094,1862.88903808594,2158.5849609375,2217.72412109375,2217.72412109375,2294.60498046875,2483.85205078125,3903.19506835938,7218.27685546875,6952.580078125,5204.2587890625,6085.4208984375,6608.80322265625,10495.080078125,7285.9482421875,10224.3701171875,8616.8515625,7806.38720703125,8959.5888671875,12170.9404296875,13008.5,18154.060546875,214.563598632812,5793.85205078125,1253.43896484375,6871.85595703125,2666.27392578125,2615.27587890625,919.557922363281,2421.94702148438,3039.9599609375,5749.3310546875,3332.40893554688,2288.67504882812,5875.048828125,3090.73193359375,17976.150390625,74.3434524536133,1666.11303710938,165.207702636719,3695.89697265625,1784.27404785156,357.949890136719,3836.98608398438,2594.72290039062,6056.75390625,5463.80322265625,936.177307128906,8455.50390625,5794.8310546875,4878.93701171875,5517.8408203125,1817.28405761719,13830.6396484375,2409.27392578125,7055.7021484375,3550.07495117188,5588.6640625,2937.26391601562,1220.83605957031,334.049407958984,334.049285888672,2777.35498046875,501.074096679688,853.722473144531,1117.43896484375,2842.76391601562,1484.99401855469,6788.9580078125,11536.5703125,0,0,4023.2109375,4078.15209960938,25142.240234375,10941.349609375,0,0,0,4368.4130859375,0,0,0,2483.85107421875,0,0,8965.2431640625,0,803.343017578125,922.572875976562,29009.109375,6004.72802734375,3403.05590820312,7244.56103515625,0,735.205078125,0,5569.76123046875,1491.01599121094,0,10711.080078125,642.664489746094,0,0,0,10610.080078125,0,0,0,0,0,1177.11804199219,0,2814.19506835938,0,0,1307.90795898438,0,1896.02294921875,532.253601074219,0,1122.62097167969,1605.44799804688,0,0,6567.3291015625,558.773376464844,1706.65698242188,0,0,0,0,1778.08898925781,7967.208984375,0,752.390075683594,0,9662.669921875,0,2158.05004882812,6539.537109375,0,0,3141.9169921875,0,0,0,6150.52001953125,449.047912597656,0,2237.2080078125,0,3000.837890625,2899.82006835938,12357.2197265625,4491.8837890625,0,0,10240.3603515625,645.272277832031,0,0,7652.1201171875,8912.484375,1162.36206054688,10393.6103515625,0,3649.76904296875,1275.35595703125,0,0,0,0,0,0,1197.46203613281,0,0,9319.4443359375,0,0,0,16341.16015625,1862.88903808594,0,0,1371.47302246094,8920.470703125,7322.037109375,0,4128.44287109375,1726.44494628906,2707.3720703125,0,0,0,8870.87890625,0,0,2138.09399414062,0,0,8479.5927734375,29897.189453125,1124.80102539062,0,8797.34765625,0,8606.7431640625,0,0,506.407592773438,0,1765.67602539062,0,0,2006.62902832031,0,1596.76196289062,902.456481933594,0,1359.34704589844,9311.9384765625,13503.76953125,0,3357.18505859375,0,1321.66003417969,0,0,0,0,9902.7626953125,0,1203.82397460938,3470.38891601562,2129.01611328125,6449.47998046875,2531.31103515625,2025.56604003906,1087.80297851562,0,0,0,1868.02099609375,0,0,4479.5869140625,12419.1796875,0,591.815124511719,0,0,5926.794921875,0,1177.11804199219,0,2080.208984375,0,0,20035.259765625,0,3266.40600585938,10068.400390625,0,0,0,4932.21484375,2265.5791015625,0,0,4118.68115234375,6346.19287109375,1327.99304199219,0,515.827392578125,5716.4072265625,1650.46105957031,8100.533203125,8159.5068359375,0,863.4794921875,0,5440.81494140625,1468.38305664062,0,1785.18005371094,6608.30419921875,11696.3701171875,23031.98046875,0,0,0,0,875.261474609375,0,0,0,14701.9501953125,2850.61010742188,0,3256.1650390625,6955.05419921875,0,13370.580078125,0,19995.640625,3751.04809570312,9164.44921875,3072.72607421875,12205.1396484375,16946.630859375,580.790100097656,10857.240234375,9352.19921875,1159.13098144531,7311.56103515625,0,0,83.6896362304688,24276.970703125,520.4462890625,0,24105.390625,4577.68017578125,5562.59814453125,9107.4306640625,159.884704589844,2455.06689453125,9160.693359375,0,0,9818.466796875,0,0,0,0,0,0,494.643005371094,4087.21411132812,5630.0498046875,7505.212890625,11491.9501953125,0,24294.75,8960.68359375,5395.119140625,3200.912109375,0,9854.1533203125,13371.25,4184.73193359375,2174.955078125,474.501800537109,2677.77099609375,0,0,18291.41015625,2003.68005371094,13732.98046875,367.823394775391,6382.5869140625,11280.7099609375,5393.89501953125,0,32984.25,5035.44384765625,142.39729309082,4084.25805664062,19289.849609375,0,5613.9091796875,1606.66198730469,6608.13720703125,8720.9052734375,1577.1669921875,3063.8779296875,0,1174.99096679688,9210.447265625,0,10033.91015625,6974.48388671875,4284.42919921875,0,766.298583984375,36941.26953125,5551.4560546875,8140.40185546875,10598.669921875,0,3104.81494140625,3285.67993164062,671.227111816406,5160.2587890625,4152.60888671875,1239.62805175781,3248.93701171875,0,3677.587890625,2041.36303710938,2275.36791992188,0,1734.55895996094,2682.125,240.106704711914,308.219207763672,8784.2373046875,1615.90100097656,963.9970703125,0,1642.36499023438,0,3796.02905273438,6142.68115234375,2445.58911132812,0,0,0,0,0,0,2285.03002929688,2292.1708984375,273.552490234375,2684.90991210938,0,1405.51196289062,1646.51000976562,393.859802246094,2672.20190429688,823.25439453125,2483.85205078125,1178.21899414062,0,1726.43896484375,664.568969726562,690.192016601562,1428.14404296875,705.196411132812,0,0,0,2483.85205078125,0,0,0,1156.79699707031,0,490.465606689453,0,0,0,0,2595.26708984375,0,2036.7900390625,2750.84106445312,620.962707519531,1428.14404296875,0,1633.20202636719,0,0,559.596008300781,7666.875,2856.287109375,0,2642.06689453125,2456.99389648438,4503.06396484375,0,1413.86303710938,165.207702636719,0,604.153869628906,1168.90197753906,9691.033203125,0,0,2465.61303710938,0,0,1170.32702636719,1922.625,0,0,2749.97705078125,0,0,1537.92895507812,0,8012.0849609375,768.810180664062,1345.90905761719,825.230102539062,0,1206.44104003906,0,0],[9930.0458984375,3595.89404296875,24909.44921875,7506.14599609375,289.789886474609,4056.49389648438,0,8472.158203125,2164.02197265625,12418.0703125,8173.908203125,17094.640625,0,18739.9296875,3023.87890625,3228.5029296875,14581.8603515625,7693.39990234375,10804.3203125,10747.349609375,0,5149.5009765625,6408.9501953125,1991.40002441406,6281.43310546875,11163.169921875,9642.9990234375,9897.048828125,11142.8701171875,16218.0400390625,995.7001953125,0,26372.279296875,6551.591796875,1574.42395019531,0,3191.7529296875,20505.9296875,6181.8798828125,5911.55078125,3094.15600585938,0,1254.58203125,13188.830078125,8061.48486328125,2787.9599609375,3972.5400390625,0,0,0,12187.41015625,4843.17578125,0,8087.48681640625,0,2348.97290039062,590.781799316406,0,1067.50598144531,7284.98583984375,13167.51953125,1048.43200683594,0,1923.93798828125,3196.57104492188,4666.23583984375,549.298400878906,762.914611816406,10694.2900390625,0,0,8546.71484375,7479.65576171875,0,647.20458984375,0,11965.8095703125,9598.541015625,10363.26953125,18783.349609375,18678.080078125,60307.9296875,0,23005.599609375,6456.69677734375,0,1773.42297363281,11233.259765625,0,2321.10693359375,4941.84912109375,0,0,0,3881.28393554688,17230.9609375,1294.40905761719,8048.60302734375,0,14509.9296875,0,9970.6806640625,17814.98046875,0,9983.7841796875,0,8124.71484375,5587.5029296875,9737.154296875,4482.84521484375,17685.1796875,5010.341796875,1460.35998535156,2456.15307617188,0,26817.599609375,0,9265.7880859375,1652.63696289062,13829.6201171875,485.229797363281,4232.30908203125,2484.54907226562,4814.626953125,7458.10498046875,0,34099.28125,13385.8603515625,5112.01416015625,1953.26794433594,0,10641.240234375,11656.509765625,3621.70703125,0,0,0,2454.5,0,4488.4951171875,0,2346.82788085938,6011.02099609375,0,7913.38623046875,661.1923828125,3075.86206054688,1115.85998535156,317.895202636719,12229.6298828125,0,480.527008056641,3251.10009765625,11460.5595703125,7315.4521484375,702.183898925781,0,15369.48046875,12064.41015625,13278.9697265625,8836.56640625,4387.05712890625,11965.8095703125,2186.18896484375,2975.03100585938,14271.23046875,2094.11889648438,11300.240234375,130.679092407227,2877.68188476562,6103.74609375,2329.86694335938,0,9381.294921875,16451.4609375,6485.5078125,3154.71997070312,3557.93408203125,668.74658203125,5487.97021484375,9017.00390625,0,10283.490234375,5665.06591796875,2746.61401367188,8803.666015625,10989.9296875,11134.98046875,1433.53100585938,5518.0830078125,5594.72900390625,3689.1259765625,179.021697998047,4551.97900390625,0,2090.67797851562,1973.34497070312,5861.60302734375,9251.357421875,13626.0400390625,7906.3408203125,7947.2568359375,11648.7001953125,18295.8203125,14416.83984375,4635.66015625,0,0,7661.97314453125,15191.91015625,6421.52978515625,4350.9072265625,0,0,0,11412.240234375,1709.34204101562,1374.06604003906,7779.26318359375,5100.46923828125,0,11464.7099609375,8774.623046875,0,4082.3701171875,0,2018.55603027344,0,796.559692382812,7976.93212890625,7318.18603515625,0,9750.66015625,5811.76513671875,3385.81103515625,16717.119140625,11293.8095703125,99.5700225830078,2777.5849609375,1659.5,8408.392578125,14683.6298828125,0,929.883911132812,5522.7880859375,5445.2001953125,0,0,4146.60302734375,4321.705078125,1660.50805664062,8484.2392578125,743.666625976562,9371.037109375,4849.55908203125,1358.64294433594,0,3786.6279296875,6210.669921875,4032.7080078125,0,4279.61279296875,11141.3896484375,22163.25,3462.56396484375,0,0,6788.462890625,0,12590.7099609375,1424.94396972656,10976.509765625,9558.5009765625,0,12803.9697265625,0,10092.830078125,0,13228.2802734375,7535.94189453125,1085.43994140625,12558.01953125,0,5615.18896484375,671.331787109375,0,559.443176269531,6167.68115234375,6943.341796875,672.877319335938,36646.94921875,0,8881.6650390625,7382.548828125,0,4181.94189453125,15952.599609375,0,12383.6796875,0,14051.16015625,10740.080078125,11796.4697265625,9227.0517578125,3552.26806640625,10569.26953125,6040.3349609375,9199.5634765625,3880.8330078125,16477.01953125,0,10067.4296875,4779.72021484375,0,8976.826171875,0,2502.52587890625,5775.06201171875,0,0,0,0,14444.7099609375,0,0,0,4623.18798828125,2113.72192382812,7618.63916015625,16461.5703125,9920.9453125,4196.375,8743.0712890625,3343.22412109375,1720.90698242188,0,16658.25,0,9722.0029296875,5573.546875,1333.44494628906,3783.65991210938,215.83479309082,0,3515.92895507812,17014.58984375,5435.787109375,0,0,6771.6220703125,0,0,5970.2568359375,7171,0,1859.1669921875,0,6191.94287109375,0,7284.39404296875,0,3123.11596679688,445.830902099609,0,1320.92297363281,0,7367.0400390625,0,0,0,2015.50305175781,1764.10803222656,15791.1298828125,5350.0380859375,18859.890625,0,0,1135.46997070312,6378.72021484375,10020.7197265625,5497.5908203125,7176.18701171875,0,8396.654296875,5611.8662109375,39483.53125,7404.76220703125,7952.5400390625,0,8644.4267578125,0,7152.1318359375,8329.8232421875,0,12429.91015625,0,11223.7197265625,5088.759765625,4374.0400390625,0,1553.291015625,0,1698.30395507812,16900.30078125,11630.66015625,11011.5703125,0,20893.109375,20857.83984375,4677.048828125,11294.6298828125,7565.27294921875,0,100.699798583984,0,14626.3896484375,12898.3798828125,7396.2919921875,5767.1328125,6527.9189453125,5767.7041015625,3931.23803710938,20942.240234375,10820.5498046875,23483.44921875,11731.2001953125,0,1653.48095703125,0,0,14690.349609375,0,604.19873046875,3418.09692382812,0,11197.33984375,0,6546.009765625,0,6723.4140625,1914.41394042969,0,132.759994506836,3982.80102539062,11607.08984375,1455.68994140625,7226.048828125,1890.93701171875,2639.2900390625,4485.6162109375,13613.349609375,1390.50903320312,5843.7958984375,9453.8271484375,8598.5224609375,9378.6533203125,7896.70703125,0,16988.1796875,0,0,2987.10107421875,2920.19897460938,0,6735.31982421875,0,0,0,128.671997070312,10673.7001953125,0,4159.9189453125,44.7554588317871,0,29408.0390625,0,9722.3486328125,3701.81201171875,16969.94921875,6930.3359375,3795.79907226562,9074.763671875,5193.2470703125,479.267700195312,0,2193.52807617188,11120.5302734375,7609.51806640625,6086.9658203125,2725.32202148438,2169.02709960938,0,597.419982910156,6793.0771484375,9495.90234375,1264.23205566406,14281.3095703125,10274.83984375,278.875091552734,11235.1103515625,6336.783203125,0,0,0,11544.009765625,10361.6904296875,0,6831.10595703125,3083.5810546875,11127.2802734375,5448.80078125,0,5712.64306640625,0,0,9139.65234375,0,1184.88195800781,10225.8798828125,4393.52294921875,0,0,3290.29296875,11856.8798828125,4715.37109375,19533.880859375,289.789886474609,12896.2197265625,1672.77600097656,8924.39453125,284.658386230469,16328.9599609375,7343.9638671875,0,12359.3095703125,8072.18115234375,0,0,0,8190.4208984375,0,15762.8798828125,14527.8798828125,4813.0498046875,7263.02490234375,6153.830078125,3523.57788085938,12659.580078125,0,8764.1484375,0,7344.67822265625,0,0,0,0,0,4350.9072265625,7812.52197265625,0,0,5670.81982421875,8997.193359375,308.335205078125,4978.5009765625,3644.65502929688,665.737426757812,7078.17822265625,9766.2001953125,7645.05517578125,4844.80322265625,0,0,0,5344.02099609375,4812.576171875,17395.169921875,0,0,0,439.688110351562,10770.9599609375,4858.89501953125,0,0,4974.5859375,0,10833.33984375,0,0,0,7600.10400390625,0,0,20780.650390625,499.257202148438,0,1740.19897460938,1324.5419921875,14792.900390625,6672.02099609375,1239.84399414062,0,0,3708.71899414062,4116.7021484375,0,0,30247.5,12780.01953125,3412.955078125,7094.919921875,3746.70092773438,12573.9697265625,11195.9296875,4209.5791015625,0,4164.76708984375,5088.98583984375,6027.63916015625,1568.15002441406,557.749877929688,796.559020996094,4335.1591796875,7010.44384765625,6354.19384765625,0,2891.66796875,0,1824.376953125,8823.05859375,7047.080078125,3811.68310546875,0,9602.439453125,0,3825.30810546875,9772.283203125,10798.5595703125,4657.27294921875,8551.533203125,4309.8779296875,5286.39599609375,12486.169921875,3268.93798828125,4994.22705078125,5514.365234375,2978.6689453125,10877.349609375,0,1065.67199707031,2481.51806640625,6330.88818359375,2649.59912109375,11135.5302734375,14380.169921875,202.284698486328,11061.6201171875,0,10864.8798828125,11602.9404296875,0,2657.705078125,4132.5771484375,11303.1396484375,0,0,0,0,6365.03076171875,2189.42602539062,3480.84692382812,0,10210.990234375,11048.080078125,0,0,8993.865234375,0,15581.4404296875,18085.73046875,4687.93701171875,5071.80078125,1310.72705078125,3194.01000976562,0,7300.498046875,7659.2177734375,18347.259765625,5193.0888671875,2652.625,13674.75,0,0,3475.52001953125,4251.126953125,275.566101074219,0,11306.26953125,8562.6025390625,3590.70190429688,0,4211.662109375,12797.669921875,2035.91394042969,604.228698730469,4768.35400390625,2389.67895507812,0,6867.7412109375,8469.275390625,0,4188.73583984375,1143.38696289062,18155.830078125,3020.94799804688,1725.59204101562,0,5114.81396484375,0,0,781.224304199219]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>married<\/th>\n      <th>nodegree<\/th>\n      <th>re75<\/th>\n      <th>re78<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":7,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[7,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
---
layout: true
# Regression in .mono[R]

---
## Output from `lm()`

Back to `lm()`.

--
The information that `lm()` prints to screen is underwhelming.


```r
lm(re78 ~ treat, data = lalonde_df)
```

```
#&gt; 
#&gt; Call:
#&gt; lm(formula = re78 ~ treat, data = lalonde_df)
#&gt; 
#&gt; Coefficients:
#&gt; (Intercept)        treat  
#&gt;      5090.0        886.3
```

--

But there's a lot more under the hood.
---
## Hidden information

Let's save the output of our call to `lm()`.

--


```r
est_lalonde &lt;- lm(re78 ~ treat, data = lalonde_df)
```

--

What .hi-slate[class] is `est_lalonde`?

--


```r
est_lalonde %&gt;% class()
```

```
#&gt; [1] "lm"
```

which means there's probably a lot more going on than what printed.
---

Does it have .hi-slate[names]?

--


```r
est_lalonde %&gt;% names()
```

```
#&gt;  [1] "coefficients"  "residuals"     "effects"       "rank"         
#&gt;  [5] "fitted.values" "assign"        "qr"            "df.residual"  
#&gt;  [9] "xlevels"       "call"          "terms"         "model"
```

--

Can we .hi-slate[tidy] it?

--


```r
est_lalonde %&gt;% tidy()
```

```
#&gt; # A tibble: 2 x 5
#&gt;   term        estimate std.error statistic  p.value
#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
#&gt; 1 (Intercept)    5090.      303.     16.8  9.54e-54
#&gt; 2 treat           886.      472.      1.88 6.09e- 2
```
---
layout: false
class: clear, middle

You'll generally see folks take the `summary()` of an `lm` object.

---
class: clear


```r
est_lalonde %&gt;% summary()
```

```
#&gt; 
#&gt; Call:
#&gt; lm(formula = re78 ~ treat, data = lalonde_df)
#&gt; 
#&gt; Residuals:
#&gt;    Min     1Q Median     3Q    Max 
#&gt;  -5976  -5090  -1519   3361  54332 
#&gt; 
#&gt; Coefficients:
#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    
#&gt; (Intercept)   5090.0      302.8  16.811   &lt;2e-16 ***
#&gt; treat          886.3      472.1   1.877   0.0609 .  
#&gt; ---
#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
#&gt; 
#&gt; Residual standard error: 6242 on 720 degrees of freedom
#&gt; Multiple R-squared:  0.004872,	Adjusted R-squared:  0.003489 
#&gt; F-statistic: 3.525 on 1 and 720 DF,  p-value: 0.06086
```
---
layout: true
# Regression in .mono[R]

---
## `summary()`

Interestingly, `summary()` contains additional information.


```r
est_lalonde %&gt;% names()
```

```
#&gt;  [1] "coefficients"  "residuals"     "effects"       "rank"         
#&gt;  [5] "fitted.values" "assign"        "qr"            "df.residual"  
#&gt;  [9] "xlevels"       "call"          "terms"         "model"
```


```r
est_lalonde %&gt;% summary() %&gt;% names()
```

```
#&gt;  [1] "call"          "terms"         "residuals"     "coefficients" 
#&gt;  [5] "aliased"       "sigma"         "df"            "r.squared"    
#&gt;  [9] "adj.r.squared" "fstatistic"    "cov.unscaled"
```
---
## `tidy()`

That said, `summary()`'s output is a bit overwhelming.

--

As we saw, the output from `tidy()` contained everything we generally want.


```r
est_lalonde %&gt;% tidy()
```

```
#&gt; # A tibble: 2 x 5
#&gt;   term        estimate std.error statistic  p.value
#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
#&gt; 1 (Intercept)    5090.      303.     16.8  9.54e-54
#&gt; 2 treat           886.      472.      1.88 6.09e- 2
```
---
## Non-standard standard errors

.qa[Q] Which estimator does `lm()` use for its standard errors?

--

.qa[A] Spherical/classical/homoskedastic.

--

.qa[Q] What if we want something else?

---
name: outside
## Outside options

.qa[Q] What if we want something else?

.qa[A] This is why you'll end up replacing `lm()` with one of two different linear-regression packages.

--

1. `felm()` from the [`lfe`](https://cran.r-project.org/web/packages/lfe/index.html) package is incredibly fast with high-dimensional fixed effects, easily implements IV/2SLS, and offers heteroskedasticity- and cluster-robust standard errors estimators.

--

1. `lm_robust()` from the [`estimatr`](https://declaredesign.org/r/estimatr/) package is fast, has a sister function named `iv_robust()` for IV/2SLS, and allows for a wide range of heteroskedasticity- and cluster-robust standard error estimators.

--

Both packages maintain the same `y ~ x` formula (plus additional features).
---
name: estimatr
## `estimatr`

Let's check out `lm_robust()` from `estimatr`.

--

We still need input a `formula` and `data`, but now we have options for the type of standard error estimator (`se_type`).

--

&gt; The sort of standard error sought. If `clusters` is not specified the options are "HC0", "HC1" (or "stata", the equivalent), "HC2" (default), "HC3", or "classical". If `clusters` is specified the options are "CR0", "CR2" (default), or "stata". Can also specify "none", which may speed up estimation of the coefficients.

.grey-light[`estimatr` documentation for `lm_robust()`]
---
## `estimatr`

Now for the magic.


```r
# Load 'estimatr' package
p_load(estimatr)
# Estimate
robust_lalonde &lt;- lm_robust(re78 ~ treat, data = lalonde_df)
# Tidy results
tidy(robust_lalonde)
```

```
#&gt;          term  estimate std.error statistic      p.value   conf.low
#&gt; 1 (Intercept) 5090.0483  277.3680 18.351243 5.335543e-62 4545.50153
#&gt; 2       treat  886.3037  488.2045  1.815435 6.987292e-02  -72.17078
#&gt;   conf.high  df outcome
#&gt; 1  5634.595 720    re78
#&gt; 2  1844.778 720    re78
```
---
## Prediction

So what if we want to get the predictions from a regression?

--

You have *a lot* of options. Here are two (for different scenarios).

--

.note[Scenario 1] You want predictions for the original `\(X\)`,


```r
robust_lalonde$fitted.values
```

--

.note[Scenario 2] You want predictions (with prediction intervals) for new data,


```r
predict(
  object = robust_lalonde,
  newdata = new_df,
  interval = "prediction"
)
```
---
name: logit
## Other regressions

Ordinary least squares (OLS) is only one of many types of regressions.

If you can run one regression in .mono[R], you can run any regression in .mono[R]..super[.pink[†]]

.footnote[.pink[†] This is not to say that you should or that you'll know what you're doing.
&lt;br&gt;.pink[††] Logit models are a popular nonlinear regression model for binary outcomes.]

--

_E.g._, logistic regression ("logit").super[.pink[††]] in .mono[R] uses the `glm()` function.

To estimate the probability of treatment on observables in LaLonde's data,


```r
glm(
  treat ~ age + education + black + hispanic + married,
* family = "binomial",
  data = lalonde_df
)
```
---
layout: false
class: clear


```r
# Estimate logit model
trt_logit &lt;- glm(
  treat ~ age + education + black + hispanic + married,
  family = "binomial",
  data = lalonde_df
)
# Tidy logit results
trt_logit %&gt;% tidy()
```

```
#&gt; # A tibble: 6 x 5
#&gt;   term        estimate std.error statistic p.value
#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
#&gt; 1 (Intercept) -0.888      0.611     -1.45    0.146
#&gt; 2 age          0.00229    0.0119     0.193   0.847
#&gt; 3 education    0.0606     0.0456     1.33    0.183
#&gt; 4 black       -0.163      0.259     -0.629   0.529
#&gt; 5 hispanic    -0.289      0.346     -0.835   0.404
#&gt; 6 married      0.0600     0.210      0.285   0.775
```

(Not too surprising, since treatment was randomly assigned.)
---
layout: false
name: resources

# Additional resources

## There's more

General resources

- The [`swirl` package](https://swirlstats.com/) will teach you .mono[R] in .mono[R].

Regression with `estimatr`

- Getting started with `estimatr`
- A [cheatsheet](https://github.com/rstudio/cheatsheets/raw/master/estimatr.pdf) for `estimatr`

Logit models (logistic regression)

- [Examples and discussion](https://stats.idre.ucla.edu/r/dae/logit-regression/)
- [Interpretting results from logit models](https://stats.idre.ucla.edu/other/mult-pkg/faq/general/faq-how-do-i-interpret-odds-ratios-in-logistic-regression/)
---
layout: false

# Table of contents

.pull-left[
### Regression in .mono[R]
.smaller[
1. [Schedule](#schedule)
1. [Review](#review)
1. [Regression](#reg)
  - [Coffee comics](#comics)
  - [The `base` option: `lm`](#lm)
  - [Transformations](#transformations)
  - [LaLonde (1986)](#lalonde)
  - [Other options](#outside)
  - [`estimatr` and `lm_robust()`](#estimatr)
  - [Prediction](#predict)
  - [Logistic regression](#logit)
1. [More resources](#resources)
]]

---
exclude: true
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
